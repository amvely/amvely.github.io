<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript">
        // 1. 설정
        const storeBaseUrl = "https://brand.naver.com/starksein/products/11437271504";
        const gasUrl = "https://script.google.com/macros/s/AKfycbw_7EgiKK39h9zoJliRiOgp8RGEu0yFkqPe8F4uttODLAdrF95-RsaGm1lekTPcT0A6/exec";

        const urlParams = new URLSearchParams(window.location.search);
        const postID = urlParams.get('p') || 'default';
        const blogID = urlParams.get('b') || 'main_blog';

        // 2. 통계 기록 및 이동 함수
        async function trackAndRedirect() {
            try {
                // 구글 시트로 데이터 전송 (비동기 호출)
                // fetch를 사용하여 로그를 기록합니다. mode: 'no-cors'는 응답 확인 없이 보낼 때 사용합니다.
                fetch(`${gasUrl}?b=${blogID}&p=${postID}`, { mode: 'no-cors' });
                
                // 데이터 기록을 위해 아주 짧게 대기(0.1초) 후 리다이렉트
                setTimeout(() => {
                    const finalUrl = `${storeBaseUrl}?nt_source=${blogID}&nt_medium=${postID}`;
                    window.location.replace(finalUrl);
                }, 100);
            } catch (e) {
                // 에러 발생 시에도 쇼핑몰 이동은 보장
                window.location.replace(storeBaseUrl);
            }
        }

        window.onload = trackAndRedirect;
    </script>
</head>
<body style="background:#fff;">
</body>
</html>

